(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{55:function(e,t,n){},56:function(e,t,n){},63:function(e,t,n){},69:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n.n(a),c=n(34),r=n.n(c),l=(n(55),n(8)),i=(n(56),n(7)),o=n(15),d=n(9),j=n.n(d),b=n(14),u=n(35),m=n(70),h=n(0),x=function(){return Object(h.jsx)(u.a,{className:"d-flex justify-content-center py-5",children:Object(h.jsx)(m.a,{variant:"primary",animation:"border",role:"status",children:Object(h.jsx)("span",{className:"sr-only",children:"Loading..."})})})},p=n(73),O=n(71),f=n(75),g=n(76),v=n(13),w=n(39),y=n(38),N=Object(a.createContext)({isLoggedIn:!1,uid:null,token:null,login:function(){},logout:function(){}}),k=function(e){var t=e.update,n=e.tweetsUpdated,s=Object(a.useContext)(N),c=Object(a.useState)(!1),r=Object(l.a)(c,2),i=r[0],o=r[1],d=Object(a.useState)(),u=Object(l.a)(d,2),m=u[0],k=u[1];return Object(a.useEffect)((function(){var e=function(){var e=Object(b.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(!0),e.prev=1,e.next=4,fetch("".concat("https://twitter-squareboat.herokuapp.com/api","/tweets/").concat(s.uid));case 4:return t=e.sent,e.next=7,t.json();case 7:n=e.sent,console.log(t,n),k(n.tweets),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0);case 15:o(!1);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(){return e.apply(this,arguments)}}();e()}),[t,n]),Object(h.jsx)(p.a,{children:m&&m.length>0?m.map((function(e){return Object(h.jsxs)(p.a.Item,{className:"px-3",action:!0,as:"div",style:{padding:"0",border:"none"},children:[Object(h.jsx)(O.a,{className:"d-flex px-3 pb-1 mt-n2 text-muted"}),Object(h.jsx)(f.a,{className:"mb-n2 w-100",children:Object(h.jsxs)(f.a.Body,{children:[Object(h.jsxs)("div",{style:{display:"flex"},children:[Object(h.jsx)("div",{className:"rounded-circle",children:Object(h.jsx)(g.a,{className:"bg-border-color rounded-circle mr-2 overflow-hidden",style:{height:"50px",width:"50px"},children:Object(h.jsx)(g.a.Image,{src:e.image?e.user.profile_image_url:"/img/default-profile-vector.svg",className:"w-100 h-100"})})}),Object(h.jsxs)("div",{style:{marginLeft:"1rem"},children:[Object(h.jsxs)("div",{className:"d-flex",children:[Object(h.jsx)("div",{className:"text-dark font-weight-bold mr-1",children:e.name}),Object(h.jsxs)("span",{className:"text-muted mr-1",children:["@",e.uid]}),Object(h.jsx)("pre",{className:"m-0 text-muted",children:" - "}),Object(h.jsx)("span",{className:"text-muted",children:new Date(e.createdDate).toUTCString().slice(5,11)})]}),Object(h.jsx)("div",{className:"mb-n1 mt-1",children:Object(h.jsx)("blockquote",{className:"mb-1 mw-100",children:Object(h.jsx)("div",{className:"mw-100 overflow-hidden",children:e.tweet})})})]})]}),Object(h.jsx)(O.a,{className:"d-flex justify-content-end align-items-center position-static",children:Object(h.jsxs)("div",{className:"d-flex align-items-center",children:[Object(h.jsx)("div",{className:"btn btn-naked-secondary rounded-pill high-index",children:Object(h.jsx)(v.a,{style:{fontSize:"1.2em"},className:"mb-1 text-muted",icon:y.faReply})}),Object(h.jsx)("button",{className:"btn btn-naked-danger rounded-pill high-index",children:Object(h.jsx)(v.a,{icon:w.faHeart})})]})})]})})]})})):i?Object(h.jsx)(x,{}):Object(h.jsx)("h1",{style:{padding:"2rem",margin:"4rem"},children:"No tweets"})})},S=n(41),C=n(40),T=function(e){var t=Object(a.useContext)(N),n=Object(a.useState)(),s=Object(l.a)(n,2),c=s[0],r=s[1],i=function(){var n=Object(b.a)(j.a.mark((function n(a){var s;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a.preventDefault(),n.next=3,fetch("".concat("https://twitter-squareboat.herokuapp.com/api","/tweets/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uid:t.uid,tweet:c})});case 3:s=n.sent,e.feedUpdate(!0),r(""),console.log(s);case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return Object(h.jsx)(f.a,{className:"mb-n2 w-100 pb-1 mt-n2",style:{padding:"0",marginRight:"2rem"},children:Object(h.jsxs)(f.a.Body,{children:[Object(h.jsx)(f.a.Title,{children:"Home"}),Object(h.jsxs)(f.a.Text,{children:[Object(h.jsx)("textarea",{className:"w-100 p-2",style:{maxHeight:"80vh"},name:"text",onChange:function(e){return r(e.target.value)},value:c,placeholder:"What's happening?"}),Object(h.jsxs)("div",{className:"border-top d-flex justify-content-between align-items-center pt-2",children:[Object(h.jsxs)("div",{style:{fontSize:"1.5em"},children:[Object(h.jsx)("button",{className:" text-primary btn btn-lg rounded-circle btn-naked-primary p-2",children:Object(h.jsx)(v.a,{size:"lg",icon:C.faSmile})}),Object(h.jsx)("button",{className:" text-primary btn btn-lg rounded-circle btn-naked-primary p-2",children:Object(h.jsx)(v.a,{size:"lg",icon:S.faImage})})]}),Object(h.jsx)("div",{className:"right",children:Object(h.jsx)("button",{onClick:i,className:"btn btn-primary rounded-pill px-3 py-2 font-weight-bold",children:"Tweet"})})]})]})]})})},E=function(e){var t=Object(a.useState)(),n=Object(l.a)(t,2),s=n[0],c=n[1];return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(T,{feedUpdate:function(e){c(!s)}}),Object(h.jsx)(k,{tweetsUpdated:e.tweetsUpdated,update:s})]})},z=n(72),L=function(e){var t=Object(a.useContext)(N),n=Object(a.useState)(),s=Object(l.a)(n,2),c=s[0],r=s[1],i=Object(a.useState)(),o=Object(l.a)(i,2),d=o[0],m=o[1],f=Object(a.useState)(),g=Object(l.a)(f,2),v=g[0],w=g[1];Object(a.useEffect)((function(){var e=function(){var e=Object(b.a)(j.a.mark((function e(){var n,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(!0),e.prev=1,e.next=4,fetch("".concat("https://twitter-squareboat.herokuapp.com/api","/users/").concat(t.uid));case 4:return n=e.sent,e.next=7,n.json();case 7:a=e.sent,console.log(a.message),m(a.users),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0);case 15:r(!1);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(){return e.apply(this,arguments)}}();e()}),[v]);var y=function(){var n=Object(b.a)(j.a.mark((function n(a){var s,c;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch("".concat("https://twitter-squareboat.herokuapp.com/api","/users/").concat(t.uid),{method:"PATCH",body:JSON.stringify({followUid:a}),headers:{"Content-Type":"application/json"}});case 2:return s=n.sent,n.next=5,s.json();case 5:c=n.sent,w(!v),console.log(s,c),console.log("LOADED:",d),e.updateTweet(!0);case 10:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(p.a,{className:"border-bottom ",variant:"flush",children:d&&d.length?d.map((function(e){return Object(h.jsx)(p.a.Item,{className:"px-1 text-truncate",action:!0,user:e,to:"/user/".concat(e.uid),children:Object(h.jsxs)("div",{style:{display:"flex",alignItems:"flex-start"},children:[Object(h.jsx)("img",{width:50,height:50,className:"rounded-circle mx-1",src:e.profile_image_url_https||"/img/default-profile-vector.svg",alt:""}),Object(h.jsx)("div",{style:{flex:"1 1"},children:Object(h.jsxs)(O.a,{children:[Object(h.jsxs)(u.a,{className:"pr-5 pr-lg-4 pr-xl-2",xs:"8",children:[Object(h.jsx)("p",{className:"text-dark mb-0 text-truncate text-capitalize font-weight-bold",children:e.name}),Object(h.jsxs)("p",{className:"text-muted text-truncate mt-n1",children:[" ","@",e.uid]})]}),Object(h.jsx)(u.a,{className:"d-flex align-items-center justify-content-end px-1",xs:"4",children:Object(h.jsx)(z.a,{onClick:function(){return y(e.uid)},className:"rounded-pill px-3 py-1 font-weight-bold",children:Object(h.jsx)("span",{children:"Follow"})})})]})})]})},e.uid)})):c?Object(h.jsx)(x,{}):Object(h.jsx)("h4",{style:{padding:"1rem"},children:" No users"})})})},I=function(e){return Object(h.jsxs)(f.a,{className:"my-3",children:[Object(h.jsx)(f.a.Header,{style:{fontWeight:"800",fontSize:"1.2rem",border:"none"},children:"You might like"}),Object(h.jsx)(L,{updateTweet:function(t){e.homeTweetUpdate(!0)},length:e.length}),Object(h.jsx)(f.a.Footer,{style:{border:"none"}})]})},U=n(18),_=n(46),A=n(48),D=n(45),H=n(43),q=n(47),F=n(44),P=n(42),W=function(){var e=Object(a.useContext)(N),t=(P.faPlusCircle,[{name:"Home",href:"/home",icon:H.faHome},{name:"Explore",href:"/explore",icon:F.faHashtag},{name:"Profile",href:"/user",icon:D.faUser},{name:"Notifications",href:"/notifications",icon:_.faBell,count:0},{name:"Settings",href:"/settings",icon:q.faEllipsisH},{name:"Messages",href:"/messages",icon:A.faEnvelope}]);return Object(h.jsxs)(u.a,{className:"d-flex flex-column align-items-end vh-100 overflow-y-auto mr-sm-n3 mr-md-0 mr-xl-3 hide-scroll",children:[Object(h.jsx)("div",{style:{paddingRight:"7rem"},className:"my-2 mr-xl-auto ml-xl-4",children:Object(h.jsx)(v.a,{style:{color:"#1DA1F2"},className:"m-2",size:"3x",icon:U.faTwitter})}),Object(h.jsx)("div",{className:"ml-0 d-flex flex-column mb-2 align-items-start",children:t.map((function(e){return Object(h.jsx)("div",{className:"d-flex align-items-top position-relative",children:Object(h.jsxs)(o.c,{to:e.href,className:" px-xl-2 py-xl-1 p-1 mb-2 mx-lg-0 mx-auto btn btn-naked-primary rounded-pill font-weight-bold btn-lg d-flex align-items-center",activeClassName:"active",children:[Object(h.jsx)(v.a,{className:"m-2",size:"lg",icon:e.icon}),Object(h.jsx)("span",{className:"d-none d-xl-block mr-2",children:e.name})]})},e.name)}))}),Object(h.jsx)(z.a,{style:{width:"10rem",margin:"auto",paddingLeft:"2.5rem"},className:"d-flex btn btn-primary font-weight-bold outline-warning rounded-pill",variant:"dark",size:"lg",onClick:e.logout,children:"Logout"})]})},J=n(32),G=n.n(J),R=(n(63),function(){var e=Object(a.useState)(),t=Object(l.a)(e,2),n=t[0],s=t[1];return Object(h.jsxs)(O.a,{className:"home-page-row",children:[Object(h.jsx)(G.a,{minWidth:576,children:Object(h.jsx)(u.a,{sm:"1",xl:"2",className:"d-flex flex-column align-items-end p-0 sticky-top vh-100",children:Object(h.jsx)(W,{})})}),Object(h.jsx)(u.a,{sm:"11",xl:"6",lg:"4",md:"4",children:Object(h.jsx)(E,{tweetsUpdated:n})}),Object(h.jsx)(G.a,{minWidth:322,children:Object(h.jsx)(u.a,{lg:"4",xl:"4",className:"vh-100 overflow-y-auto hide-scroll sticky-top",children:Object(h.jsx)(I,{homeTweetUpdate:function(e){s(!n)}})})})]})}),B=n(17),$=n(22),M=n(23),Y=n(25),Z=n(24),K=n(50),Q=n.n(K);function V(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"custom",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.min_length,s=void 0===a?1:a,c=n.max_length,r=void 0===c?70:c,l=n.regex,i=void 0===l?null:l,o=n.identifier,d=void 0===o?null:o;d=d||"input {".concat(t,"}"),e=e.toString().trim();var j={username:RegExp("^[_a-zA-Z0-9]{".concat(s,",").concat(r,"}$")),password:RegExp("^\\S{".concat(s,",").concat(r,"}$")),name:RegExp("^.{".concat(s,",").concat(r,"}$"))};if(i||(i=j[t]),i&&!i.test(e))throw Error("".concat(d," must match regex: ").concat(i," (range between ").concat(s," and ").concat(r," characters)"));if("html"===t&&(e=Q.a.sanitize(e,{ALLOWED_TAGS:["b"]}).trim()),e.length>r||e.length<s)throw Error("".concat(d," must be minimum ").concat(s," and maximum ").concat(r," characters"));return e.includes("\n")&&(e=e.replace(/\n+/g,"\n").trim()),e}var X=n(74),ee=function(e){Object(Y.a)(n,e);var t=Object(Z.a)(n);function n(){var e;Object($.a)(this,n);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={disabled:!1,error:null,password:"",username:""},e.handleChange=function(t){e.setState(Object(B.a)({},t.target.name,t.target.value))},e.handleSubmit=function(){var t=Object(b.a)(j.a.mark((function t(n){var a,s,c,r,l;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("production"),n.preventDefault(),!e.state.disabled){t.next=4;break}return t.abrupt("return");case 4:return e.setState({error:null,disabled:!0}),t.prev=5,a=n.target,s=V(a.username.value,"username",{min_length:4}),c=V(a.password.value,"password"),t.next=11,fetch("https://twitter-squareboat.herokuapp.com/api/users/login",{method:"POST",body:JSON.stringify({uid:s,password:c}),headers:{"Content-Type":"application/json"}});case 11:if(!((r=t.sent).status>=500)){t.next=16;break}throw Error("Something went wrong.");case 16:if(!(r.status>=400)){t.next=20;break}throw Error("Incorrect credentials");case 20:if(!r.ok){t.next=27;break}return t.next=23,r.json();case 23:l=t.sent,console.log(l),e.setState({disabled:!1}),e.context.login(l.uid,l.token);case 27:t.next=33;break;case 29:t.prev=29,t.t0=t.catch(5),console.log(t.t0.message),e.setState({error:t.t0.message,disabled:!1});case 33:case"end":return t.stop()}}),t,null,[[5,29]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(M.a)(n,[{key:"render",value:function(){var e=this.state.disabled;return Object(h.jsxs)(u.a,{style:{maxWidth:"400px",padding:"2rem"},className:"mx-auto border px-3 pb-3",children:[Object(h.jsx)(g.a,{style:{color:"#1DA1F2"},children:Object(h.jsx)(v.a,{className:"m-2",size:"3x",icon:U.faTwitter})}),Object(h.jsx)("h3",{className:"font-weight-bolder mt-3",children:"Sign in to Twitter"}),Object(h.jsx)("fieldset",{disabled:e,children:Object(h.jsxs)(X.a,{onSubmit:this.handleSubmit,children:[Object(h.jsxs)(X.a.Group,{controlId:"username",children:[Object(h.jsx)(X.a.Label,{children:"Username"}),Object(h.jsx)(X.a.Control,{onChange:this.handleChange,value:this.state.username,type:"text",name:"username",autoCapitalize:"off"})]}),Object(h.jsxs)(X.a.Group,{className:"mb-0",controlId:"password",children:[Object(h.jsx)(X.a.Label,{children:"Password"}),Object(h.jsx)(X.a.Control,{onChange:this.handleChange,value:this.state.password,autoCorrect:"off",type:"password",name:"password"})]}),Object(h.jsx)("p",{children:Object(h.jsx)("small",{className:"text-danger",children:this.state.error})}),Object(h.jsxs)("div",{className:"d-flex flex-column align-items-center",children:[Object(h.jsx)("button",{type:"submit",className:"btn btn-outline-primary btn-block rounded-pill font-weight-bold",children:"Log in"}),Object(h.jsx)("small",{className:"text-muted m-2",children:"or"}),Object(h.jsx)(o.b,{to:"/signup",className:"btn btn-primary btn-block rounded-pill font-weight-bold",children:"Sign up"})]})]})})]})}}]),n}(s.a.Component);ee.contextType=N;var te=ee,ne=function(e){Object(Y.a)(n,e);var t=Object(Z.a)(n);function n(){var e;Object($.a)(this,n);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={disabled:!1,error:null},e.handleSubmit=function(){var t=Object(b.a)(j.a.mark((function t(n){var a,s,c,r,l,i;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),!e.state.disabled){t.next=3;break}return t.abrupt("return");case 3:return e.setState({error:null,disabled:!0}),t.prev=4,a=n.target,s=V(a.username.value,"username",{min_length:4}),c=V(a.password.value,"password"),r=V(a.fullname.value,"name",{min_length:0}),console.log(s,c,r),t.next=12,fetch("".concat("https://twitter-squareboat.herokuapp.com/api","/users/signup"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uid:s,password:c,name:r})});case 12:if((l=t.sent).ok){t.next=21;break}if(409!==l.status){t.next=20;break}return t.t0=Error,t.next=18,l.json();case 18:throw t.t1=t.sent.message,(0,t.t0)(t.t1);case 20:throw Error("Something went wrong");case 21:return t.next=23,l.json();case 23:i=t.sent,console.log("data: ",i),e.setState({disabled:!1}),e.context.login(i.uid,i.token),t.next=33;break;case 29:t.prev=29,t.t2=t.catch(4),console.log(t.t2.message),e.setState({error:t.t2.message,disabled:!1});case 33:case"end":return t.stop()}}),t,null,[[4,29]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(M.a)(n,[{key:"render",value:function(){var e=this.state.disabled;return Object(h.jsxs)(u.a,{style:{maxWidth:"400px",padding:"2rem"},className:"mx-auto border px-3 pb-3",children:[Object(h.jsx)(g.a,{style:{color:"#1DA1F2"},children:Object(h.jsx)(v.a,{className:"m-2",size:"3x",icon:U.faTwitter})}),Object(h.jsx)("h1",{style:{fontWeight:"700",padding:"1rem"},className:"font-weight-bolder",children:"Happening now"}),Object(h.jsx)("h5",{style:{paddingBottom:"0.5rem"},className:"font-weight-bolder",children:"Join twitter today."}),Object(h.jsx)("fieldset",{disabled:e,children:Object(h.jsxs)(X.a,{onSubmit:this.handleSubmit,children:[Object(h.jsxs)(X.a.Group,{controlId:"username",children:[Object(h.jsxs)(X.a.Label,{children:["Choose a username - ",Object(h.jsx)("small",{className:"text-muted",children:"required"})]}),Object(h.jsx)(X.a.Control,{type:"text",name:"username",autoCapitalize:"off",autoComplete:"off"})]}),Object(h.jsxs)(X.a.Group,{controlId:"fillname",children:[Object(h.jsxs)(X.a.Label,{children:["Full name - ",Object(h.jsx)("small",{className:"text-muted",children:"optional"})]}),Object(h.jsx)(X.a.Control,{type:"text",name:"fullname",autoCapitalize:"on"})]}),Object(h.jsxs)(X.a.Group,{controlId:"password",children:[Object(h.jsxs)(X.a.Label,{children:["Choose a password - ",Object(h.jsx)("small",{className:"text-muted",children:"required"})]}),Object(h.jsx)(X.a.Control,{type:"password",name:"password"})]}),Object(h.jsxs)("p",{className:"mt-n2",children:[Object(h.jsxs)("small",{children:["Already have account? ",Object(h.jsx)(o.b,{to:"/login",children:"login instead"})]}),Object(h.jsx)("br",{}),Object(h.jsx)("small",{className:"text-danger",children:this.state.error})]}),Object(h.jsxs)("div",{className:"d-flex flex-column align-items-center",children:[Object(h.jsx)("button",{type:"submit",className:"btn btn-outline-primary font-weight-bold rounded-pill btn-block",children:Object(h.jsx)("span",{children:"Sign up"})}),Object(h.jsx)("div",{className:"seperator",children:Object(h.jsx)("span",{children:"or"})}),Object(h.jsx)(o.b,{to:"/login",className:"btn btn-primary font-weight-bold rounded-pill btn-block",children:Object(h.jsx)("span",{children:"Log in"})})]})]})})]})}}]),n}(s.a.Component);ne.contextType=N;var ae=ne,se=function(){var e=Object(a.useState)(!1),t=Object(l.a)(e,2),n=t[0],s=t[1],c=Object(a.useState)(!1),r=Object(l.a)(c,2),d=r[0],j=r[1];console.log("production");var b,u=Object(a.useCallback)((function(e,t){s(!0),j(e)}),[]),m=Object(a.useCallback)((function(){s(null),j(null)}),[]);return b=n?Object(h.jsxs)(i.d,{children:[Object(h.jsx)(i.b,{path:"/",exact:!0,element:Object(h.jsx)(R,{})}),Object(h.jsx)(i.b,{path:"*",element:Object(h.jsx)(i.a,{to:"/"})})]}):Object(h.jsxs)(i.d,{children:[Object(h.jsx)(i.b,{path:"/login",element:Object(h.jsx)(te,{})}),Object(h.jsx)(i.b,{path:"/signup",element:Object(h.jsx)(ae,{})}),Object(h.jsx)(i.b,{path:"*",element:Object(h.jsx)(i.a,{to:"/login"})})]}),Object(h.jsx)(N.Provider,{value:{isLoggedIn:!!n,token:n,uid:d,login:u,logout:m},children:Object(h.jsx)(o.a,{children:b})})};n(64);n(65).config(),r.a.render(Object(h.jsx)(se,{}),document.getElementById("root"))}},[[69,1,2]]]);
//# sourceMappingURL=main.ce395f41.chunk.js.map